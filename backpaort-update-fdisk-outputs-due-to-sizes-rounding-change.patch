From 316617e84848da418aee413abe1d26a2f6a8fde7 Mon Sep 17 00:00:00 2001
From: Karel Zak <kzak@redhat.com>
Date: Thu, 16 Apr 2020 12:19:16 +0200
Subject: [PATCH] tests: update fdisk outputs due to sizes rounding change

References: b38c20e13a51acb7e3bb388e9cc17d5fc905e7d9
Signed-off-by: Karel Zak <kzak@redhat.com>
---
 tests/expected/blkid/md-raid0-whole      |  2 +-
 tests/expected/blkid/md-raid1-whole      |  2 +-
 tests/expected/fdisk/align-512-4K-md     |  2 +-
 tests/expected/fdisk/bsd_0_64.BE         |  4 ++--
 tests/expected/fdisk/bsd_0_64.LE         |  4 ++--
 tests/expected/fdisk/bsd_0_64_alpha.LE   |  4 ++--
 tests/expected/fdisk/bsd_1_0.BE          |  4 ++--
 tests/expected/fdisk/bsd_1_0.LE          |  4 ++--
 tests/expected/fdisk/mbr-dos-mode        | 10 +++++-----
 tests/expected/fdisk/sunlabel            | 18 +++++++++---------
 tests/expected/partx/partx-image-dos+bsd |  2 +-
 11 files changed, 28 insertions(+), 28 deletions(-)

diff --git a/tests/expected/blkid/md-raid0-whole b/tests/expected/blkid/md-raid0-whole
index cc0b17f..475eb05 100644
--- a/tests/expected/blkid/md-raid0-whole
+++ b/tests/expected/blkid/md-raid0-whole
@@ -19,7 +19,7 @@ Command (m for help): Partition type
 Select (default p): Partition number (2-4, default 2): First sector (22528-204543, default 22528): Last sector, +/-sectors or +/-size{K,M,G,T,P} (22528-204543, default 204543): 
 Created a new <removed>.
 
-Command (m for help): Disk <removed>: 99.9 MiB, 104726528 bytes, 204544 sectors
+Command (m for help): Disk <removed>: 99.88 MiB, 104726528 bytes, 204544 sectors
 Units: sectors of 1 * 512 = 512 bytes
 Sector size (logical/physical): 512 bytes / 512 bytes
 I/O size (minimum/optimal): 65536 bytes / <removed> bytes
diff --git a/tests/expected/blkid/md-raid1-whole b/tests/expected/blkid/md-raid1-whole
index 6334ae1..891778c 100644
--- a/tests/expected/blkid/md-raid1-whole
+++ b/tests/expected/blkid/md-raid1-whole
@@ -19,7 +19,7 @@ Command (m for help): Partition type
 Select (default p): Partition number (2-4, default 2): First sector (22528-102271, default 22528): Last sector, +/-sectors or +/-size{K,M,G,T,P} (22528-102271, default 102271): 
 Created a new <removed>.
 
-Command (m for help): Disk /dev/md8: 49.96 MiB, 52363264 bytes, 102272 sectors
+Command (m for help): Disk /dev/md8: 49.94 MiB, 52363264 bytes, 102272 sectors
 Units: sectors of 1 * 512 = 512 bytes
 Sector size (logical/physical): 512 bytes / 512 bytes
 I/O size (minimum/optimal): <removed> bytes / <removed> bytes
diff --git a/tests/expected/fdisk/align-512-4K-md b/tests/expected/fdisk/align-512-4K-md
index ce9b3e7..c69e72f 100644
--- a/tests/expected/fdisk/align-512-4K-md
+++ b/tests/expected/fdisk/align-512-4K-md
@@ -59,7 +59,7 @@ Command (m for help): Partition type
 Select (default p): Partition number (2-4, default 2): First sector (22528-97791, default 22528): Last sector, +/-sectors or +/-size{K,M,G,T,P} (22528-97791, default 97791): 
 Created a new <removed>.
 
-Command (m for help): Disk <removed>: 47.77 MiB, 50069504 bytes, 97792 sectors
+Command (m for help): Disk <removed>: 47.75 MiB, 50069504 bytes, 97792 sectors
 Units: sectors of 1 * 512 = 512 bytes
 Sector size (logical/physical): 512 bytes / 4096 bytes
 I/O size (minimum/optimal): 65536 bytes / <removed> bytes
diff --git a/tests/expected/fdisk/bsd_0_64.BE b/tests/expected/fdisk/bsd_0_64.BE
index 3a79c49..fd78576 100644
--- a/tests/expected/fdisk/bsd_0_64.BE
+++ b/tests/expected/fdisk/bsd_0_64.BE
@@ -132,7 +132,7 @@ Disklabel type: bsd
 
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
@@ -186,7 +186,7 @@ Disklabel type: bsd
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 a      4096  6144    2049    1M 4.2BSD       0     0   0
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
diff --git a/tests/expected/fdisk/bsd_0_64.LE b/tests/expected/fdisk/bsd_0_64.LE
index d673d04..fe6e042 100644
--- a/tests/expected/fdisk/bsd_0_64.LE
+++ b/tests/expected/fdisk/bsd_0_64.LE
@@ -132,7 +132,7 @@ Disklabel type: bsd
 
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
@@ -186,7 +186,7 @@ Disklabel type: bsd
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 a      4096  6144    2049    1M 4.2BSD       0     0   0
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
diff --git a/tests/expected/fdisk/bsd_0_64_alpha.LE b/tests/expected/fdisk/bsd_0_64_alpha.LE
index 1c2a368..a675e98 100644
--- a/tests/expected/fdisk/bsd_0_64_alpha.LE
+++ b/tests/expected/fdisk/bsd_0_64_alpha.LE
@@ -134,7 +134,7 @@ Disklabel type: bsd
 
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
@@ -190,7 +190,7 @@ Disklabel type: bsd
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 a      4096  6144    2049    1M 4.2BSD       0     0   0
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
diff --git a/tests/expected/fdisk/bsd_1_0.BE b/tests/expected/fdisk/bsd_1_0.BE
index 2c46abd..13a5cfe 100644
--- a/tests/expected/fdisk/bsd_1_0.BE
+++ b/tests/expected/fdisk/bsd_1_0.BE
@@ -132,7 +132,7 @@ Disklabel type: bsd
 
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
@@ -186,7 +186,7 @@ Disklabel type: bsd
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 a      4096  6144    2049    1M 4.2BSD       0     0   0
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
diff --git a/tests/expected/fdisk/bsd_1_0.LE b/tests/expected/fdisk/bsd_1_0.LE
index 5f3b838..b6e3661 100644
--- a/tests/expected/fdisk/bsd_1_0.LE
+++ b/tests/expected/fdisk/bsd_1_0.LE
@@ -132,7 +132,7 @@ Disklabel type: bsd
 
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
@@ -186,7 +186,7 @@ Disklabel type: bsd
 Slice Start   End Sectors  Size Type     Fsize Bsize Cpg
 a      4096  6144    2049    1M 4.2BSD       0     0   0
 c      4096 20479   16384    8M unused       0     0   0
-d         0 16064   16065  7.9M unused       0     0   0
+d         0 16064   16065  7.8M unused       0     0   0
 
 Partition table entries are not in disk order.
 
diff --git a/tests/expected/fdisk/mbr-dos-mode b/tests/expected/fdisk/mbr-dos-mode
index 6560099..5bc1fbf 100644
--- a/tests/expected/fdisk/mbr-dos-mode
+++ b/tests/expected/fdisk/mbr-dos-mode
@@ -98,7 +98,7 @@ Create logical partitions
 a1cd6708e4a6d2e5f6bc9d5c0da0cf3b mbr-dos-mode.img
 
 ---layout----------
-Disk <removed>: 54.93 MiB, 57577472 bytes, 112456 sectors
+Disk <removed>: 54.91 MiB, 57577472 bytes, 112456 sectors
 Geometry: 255 heads, 63 sectors/track, 1024 cylinders
 Units: cylinders of 16065 * 512 = 8225280 bytes
 Sector size (logical/physical): 512 bytes / 512 bytes
@@ -119,7 +119,7 @@ Delete logical partitions
 4c6937d529ace5661fb82efb9394154a mbr-dos-mode.img
 
 ---layout----------
-Disk <removed>: 54.93 MiB, 57577472 bytes, 112456 sectors
+Disk <removed>: 54.91 MiB, 57577472 bytes, 112456 sectors
 Geometry: 255 heads, 63 sectors/track, 1024 cylinders
 Units: cylinders of 16065 * 512 = 8225280 bytes
 Sector size (logical/physical): 512 bytes / 512 bytes
@@ -137,7 +137,7 @@ Create another logical partition
 9589eaaed698d2402945ab3e513c1eb4 mbr-dos-mode.img
 
 ---layout----------
-Disk <removed>: 54.93 MiB, 57577472 bytes, 112456 sectors
+Disk <removed>: 54.91 MiB, 57577472 bytes, 112456 sectors
 Geometry: 255 heads, 63 sectors/track, 1024 cylinders
 Units: cylinders of 16065 * 512 = 8225280 bytes
 Sector size (logical/physical): 512 bytes / 512 bytes
@@ -158,7 +158,7 @@ Delete primary partition
 1e6d646e5df66a2664cfbbb13fa9a08a mbr-dos-mode.img
 
 ---layout----------
-Disk <removed>: 54.93 MiB, 57577472 bytes, 112456 sectors
+Disk <removed>: 54.91 MiB, 57577472 bytes, 112456 sectors
 Geometry: 255 heads, 63 sectors/track, 1024 cylinders
 Units: cylinders of 16065 * 512 = 8225280 bytes
 Sector size (logical/physical): 512 bytes / 512 bytes
@@ -178,7 +178,7 @@ Delete extended partition
 fc3cdb12326656d7996b09b6f76973e7 mbr-dos-mode.img
 
 ---layout----------
-Disk <removed>: 54.93 MiB, 57577472 bytes, 112456 sectors
+Disk <removed>: 54.91 MiB, 57577472 bytes, 112456 sectors
 Geometry: 255 heads, 63 sectors/track, 1024 cylinders
 Units: cylinders of 16065 * 512 = 8225280 bytes
 Sector size (logical/physical): 512 bytes / 512 bytes
diff --git a/tests/expected/fdisk/sunlabel b/tests/expected/fdisk/sunlabel
index 5ada4fa..2f47208 100644
--- a/tests/expected/fdisk/sunlabel
+++ b/tests/expected/fdisk/sunlabel
@@ -17,8 +17,8 @@ Sector size (logical/physical): 512 bytes / 512 bytes
 I/O size (minimum/optimal): 512 bytes / <removed> bytes
 Disklabel type: sun
 
-Device             Start   End Cylinders Size Id Type         Flags
-<removed>1     1   128       129   4M 83 Linux native 
+Device             Start   End Cylinders  Size Id Type         Flags
+<removed>1     1   128       129  3.9M 83 Linux native 
 Set partition sysid
 df75defdb97fbd56222aed18631a22d0 sunlabel.img
 Disk <removed>: 10 MiB, 10485760 bytes, 20480 sectors
@@ -28,8 +28,8 @@ Sector size (logical/physical): 512 bytes / 512 bytes
 I/O size (minimum/optimal): 512 bytes / <removed> bytes
 Disklabel type: sun
 
-Device             Start   End Cylinders Size Id Type      Flags
-<removed>1     1   128       129   4M  4 SunOS usr 
+Device             Start   End Cylinders  Size Id Type      Flags
+<removed>1     1   128       129  3.9M  4 SunOS usr 
 Set first partition readonly
 da23f66698d9a553162887621d4c7490 sunlabel.img
 Disk <removed>: 10 MiB, 10485760 bytes, 20480 sectors
@@ -39,8 +39,8 @@ Sector size (logical/physical): 512 bytes / 512 bytes
 I/O size (minimum/optimal): 512 bytes / <removed> bytes
 Disklabel type: sun
 
-Device             Start   End Cylinders Size Id Type      Flags
-<removed>1     1   128       129   4M  4 SunOS usr     r
+Device             Start   End Cylinders  Size Id Type      Flags
+<removed>1     1   128       129  3.9M  4 SunOS usr     r
 Set first partition mountable
 3ab76e8491b103eab52b2ae1856c1e30 sunlabel.img
 Disk <removed>: 10 MiB, 10485760 bytes, 20480 sectors
@@ -50,8 +50,8 @@ Sector size (logical/physical): 512 bytes / 512 bytes
 I/O size (minimum/optimal): 512 bytes / <removed> bytes
 Disklabel type: sun
 
-Device             Start   End Cylinders Size Id Type      Flags
-<removed>1     1   128       129   4M  4 SunOS usr    ur
+Device             Start   End Cylinders  Size Id Type      Flags
+<removed>1     1   128       129  3.9M  4 SunOS usr    ur
 Create second partition
 
 Welcome to fdisk <removed>.
@@ -74,7 +74,7 @@ I/O size (minimum/optimal): 512 bytes / <removed> bytes
 Disklabel type: sun
 
 Device             Start   End Cylinders  Size Id Type         Flags
-<removed>1     1   128       129    4M  4 SunOS usr       ur
+<removed>1     1   128       129  3.9M  4 SunOS usr       ur
 <removed>2   129   325       198  6.1M 83 Linux native 
 Delete all partitions
 502ba7a0cfdce2849c3a99881f0590c3 sunlabel.img
diff --git a/tests/expected/partx/partx-image-dos+bsd b/tests/expected/partx/partx-image-dos+bsd
index 379633d..ae5f314 100644
--- a/tests/expected/partx/partx-image-dos+bsd
+++ b/tests/expected/partx/partx-image-dos+bsd
@@ -1,5 +1,5 @@
 NR START   END SECTORS SIZE NAME UUID
- 1    32  7679    7648 3.8M      8f8378c0-01
+ 1    32  7679    7648 3.7M      8f8378c0-01
  2  7680 16383    8704 4.3M      8f8378c0-02
  5  7936 12799    4864 2.4M      
  6 12544 16127    3584 1.8M      
-- 
2.27.0

